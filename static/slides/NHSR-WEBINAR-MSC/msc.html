<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Forecasting multiple seasonality</title>
    <meta charset="utf-8" />
    <meta name="author" content="    Bahman Rostami-Tabar  " />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="slides-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Forecasting multiple seasonality
### <br> <br> Bahman Rostami-Tabar <br>

---





layout: true
  
&lt;div class="my-footer"&gt;
&lt;span&gt;
&lt;a href="https://bit.ly/2DyXoHb" target="_blank"&gt;&lt;b&gt;Cardiff Business School&lt;/b&gt;&lt;/a&gt; - Dr. Bahman Rostami-Tabar 
&lt;/span&gt;
&lt;/div&gt; 
---






class: inverse
background-image: linear-gradient(to right, rgba(150, 150, 150, .1), rgba(150, 150, 150, .4)), url("img/ae.jpg")
background-size: cover

### Temporal data granularity in the healthcare sector

- Hospital admission
- A&amp;E attendance
- GP visit
- NHS 111
- Clinical Support Desk
- etc

---

### Clinical Support Desk

&lt;table class=" lightable-classic" style="font-size: 24px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; IncidentID &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; TimeCallAccepted &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Type &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Priority &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; InitialNature &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Outcome &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; P3930852 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2019-05-13 11:30:47 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; HCP Admission &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; P3931133 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2019-05-13 16:33:33 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; CALL FROM OTHER AMBULANCE SERVICE &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; P3931261 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2019-05-13 16:10:08 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Abdominal Pains/Problems &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; P3931441 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2019-05-14 06:22:25 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Falls &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; N3930796 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2019-05-13 11:14:51 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Falls &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3930634 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2019-05-13 08:43:16 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Abdominal Pains/Problems &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3931486 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2019-05-13 21:57:29 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; FAILED CONTACT &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3930492 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2019-05-13 08:26:50 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Breathing Problems &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

### Clinical Support Desk

&lt;table class=" lightable-classic" style="font-size: 24px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; IncidentID &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; TimeCallAccepted &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Type &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Priority &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; InitialNature &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Outcome &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; P3930852 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2019-05-13 11:30:47 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; HCP Admission &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; P3931133 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2019-05-13 16:33:33 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; CALL FROM OTHER AMBULANCE SERVICE &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; P3931261 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2019-05-13 16:10:08 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Abdominal Pains/Problems &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; P3931441 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2019-05-14 06:22:25 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Falls &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; N3930796 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2019-05-13 11:14:51 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Falls &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3930634 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2019-05-13 08:43:16 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Abdominal Pains/Problems &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3931486 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2019-05-13 21:57:29 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; FAILED CONTACT &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3930492 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2019-05-13 08:26:50 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; C3CLINDESK &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; AMB &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Breathing Problems &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; Clinical Desk Aborted &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

## Accident &amp; Emergency Departement

&lt;table class=" lightable-classic" style="font-size: 24px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; ID &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; gender &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; type_injury &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; arrival_time &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:35:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:57:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:42:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:02:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:24:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; major &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:48:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:10:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:39:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:56:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:05:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:04:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; 2010-01-01 00:14:00 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## Accident &amp; Emergency Departement

&lt;table class=" lightable-classic" style="font-size: 24px; font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; ID &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; gender &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; type_injury &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; arrival_time &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:35:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:57:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:42:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:02:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:24:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; major &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:48:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:10:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:39:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:56:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:05:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:04:00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;background-color: white !important;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;"&gt; minor &lt;/td&gt;
   &lt;td style="text-align:left;background-color: white !important;color: white !important;background-color: #D7261E !important;"&gt; 2010-01-01 00:14:00 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

- The temporal variable (e.g. arrival_time) contains many information:

    - year, semester, quarter, month, etc
  
- We can create different time series for each frequency e.g. Half-an-Hourly, Hourly, Daily, Weekly, Monthly, Quarterly, Yearly

---

### Do we need to generate forecasts at all levels?
  
- In modern organisations, forecasts are required to inform decisions at multiple level of granularity e.g. scheduling, staffing, recruitment;

--

- Forecasts can be generated at the desired level of granularity corresponding to the decision level;

--

- Alternatively, they could be generated at all levels and then combined using `temporal reconciliation`

---

class: middle

.bitlarger[In this webinar, we will show you how to go through various steps of a `tidy time series forecasting` using the `A&amp;E dataset`.]

---

## Tidy time series forecasting workflow

![](msc_files/figure-html/workflow-1.png)&lt;!-- --&gt;

---

.three-column[

![](img/tsibble.svg)&lt;!-- --&gt;
]

.three-column[
### 
![](img/feasts.svg)&lt;!-- --&gt;
]

.three-column[
![](img/fable.svg)&lt;!-- --&gt;
]


---

## Steps in preparing data for forecasting (tidy)

&lt;img src="img/tsibble_step.jpg" width="60%" style="display: block; margin: auto;" /&gt;

---

.pull-left[
### Import A&amp;E data

```r
ae &lt;- 
readr::read_csv("data/ae_uk.csv",
col_types = 
cols(arrival_time
=col_datetime(format = "%d/%m/%Y %H:%M"))) %&gt;% 
  mutate(arrival_time=
           lubridate::force_tz(arrival_time,tz="GB"))
```
]

.pull-right[

```
## # A tibble: 773,779 x 4
##       ID gender type_injury arrival_time       
##    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;       &lt;dttm&gt;             
##  1     1 male   minor       2010-01-01 00:35:00
##  2     2 male   minor       2010-01-01 00:57:00
##  3     3 male   minor       2010-01-01 00:42:00
##  4     4 male   minor       2010-01-01 00:02:00
##  5     5 male   minor       2010-01-01 00:24:00
##  6     6 female major       2010-01-01 00:48:00
##  7     7 female minor       2010-01-01 00:10:00
##  8     8 male   minor       2010-01-01 00:39:00
##  9     9 female minor       2010-01-01 00:56:00
## 10    10 female minor       2010-01-01 00:05:00
## # … with 773,769 more rows
```
]

---

class: inverse
background-image: linear-gradient(to right, rgba(150, 150, 150, .1), rgba(150, 150, 150, .4)), url("img/time.jpg")
background-size: cover

## Create time series with `tsibble`

---

class: middle

.huge-bahman-text[A `time series` can be thought of as a list of numbers (the measurements), along with some information about what times those numbers were recorded (the index). This information can be stored as a `tsibble` object in R.]

---

## Time series in R

.hand[Why do we need `tsibble`?]

- Depending on which package you use for time series forecasting, you may need different data structures:

    - `ts(), zoo(), xts(), etc`
  
- difficult to work with tidyverse
- irregular time interval
- multiple measured variables
- multiple grouping variables

---

## What is `tsibble`?

**In tsibble:**

  + An index: time information about the observation
  + Key variable(s): set of variables that define observational units over time
  + Measured variable(s): numbers of interest

* It works with tidyverse functions.

---

.pull-left[
### Create a tsibble with A&amp;E data

```r
ae_tsb &lt;- ae %&gt;%
  as_tsibble(
    key = c(ID,gender,type_injury),
    index = arrival_time, 
    regular=FALSE)
```
]

.pull-right[

```
## # A tsibble: 773,779 x 4 [!] &lt;GB&gt;
## # Key:       ID, gender, type_injury [773,779]
##       ID gender type_injury arrival_time       
##    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;       &lt;dttm&gt;             
##  1     1 male   minor       2010-01-01 00:35:00
##  2     2 male   minor       2010-01-01 00:57:00
##  3     3 male   minor       2010-01-01 00:42:00
##  4     4 male   minor       2010-01-01 00:02:00
##  5     5 male   minor       2010-01-01 00:24:00
##  6     6 female major       2010-01-01 00:48:00
##  7     7 female minor       2010-01-01 00:10:00
##  8     8 male   minor       2010-01-01 00:39:00
##  9     9 female minor       2010-01-01 00:56:00
## 10    10 female minor       2010-01-01 00:05:00
## # … with 773,769 more rows
```
]

---

.pull-left[
### Create an equally spaced interval (a regular index)

```r
ae_half_hourly &lt;- 
ae_tsb %&gt;%
index_by(time = 
lubridate::floor_date(arrival_time, 
"30 minutes")) %&gt;%
summarise(
admission=n())
```
]

.pull-right[

```
## # A tsibble: 106,098 x 2 [30m] &lt;GB&gt;
##    time                admission
##    &lt;dttm&gt;                  &lt;int&gt;
##  1 2010-01-01 00:00:00         6
##  2 2010-01-01 00:30:00         7
##  3 2010-01-01 01:00:00         6
##  4 2010-01-01 01:30:00         9
##  5 2010-01-01 02:00:00         5
##  6 2010-01-01 02:30:00         7
##  7 2010-01-01 03:00:00         9
##  8 2010-01-01 03:30:00         6
##  9 2010-01-01 04:00:00         5
## 10 2010-01-01 04:30:00         6
## # … with 106,088 more rows
```
]

---

.pull-left[
### Check for temporal gap

```r
ae_half_hourly %&gt;% has_gaps()#check if any temporal gaps
```

```
## # A tibble: 1 x 1
##   .gaps
##   &lt;lgl&gt;
## 1 TRUE
```
]

.pull-right[

```
## # A tibble: 1 x 1
##   .gaps
##   &lt;lgl&gt;
## 1 TRUE
```
]

---

.pull-left[
### fix the temporal gap

```r
ae_half_hourly_without_gap &lt;- 
  ae_half_hourly %&gt;% 
  fill_gaps(admission=0L)
```
]

.pull-right[

```
## # A tsibble: 109,534 x 2 [30m] &lt;GB&gt;
##    time                admission
##    &lt;dttm&gt;                  &lt;int&gt;
##  1 2010-01-01 00:00:00         6
##  2 2010-01-01 00:30:00         7
##  3 2010-01-01 01:00:00         6
##  4 2010-01-01 01:30:00         9
##  5 2010-01-01 02:00:00         5
##  6 2010-01-01 02:30:00         7
##  7 2010-01-01 03:00:00         9
##  8 2010-01-01 03:30:00         6
##  9 2010-01-01 04:00:00         5
## 10 2010-01-01 04:30:00         6
## # … with 109,524 more rows
```
]

---

## Multiple seasonality

.hand[What do we mean by seasonality/ multiple seasonality?]

- `seasonality` is a regularly repeating pattern of highs and lows related to calendar time such as seasons, quarters, months, days of the week, hour of the  day and so on?

- If at least two types of seasonality exist in the time series, then we talk about multiple seasonality.


---

### Monthly Seasonal Plot

&lt;img src="msc_files/figure-html/createmonthlyp1-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

### Daily Seasonal Plot

&lt;img src="msc_files/figure-html/dailyp1-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

### Hourly Seasonal Plot

&lt;img src="msc_files/figure-html/hourly-1.png" width="70%" style="display: block; margin: auto;" /&gt;

## Fourier terms

.pull-left[
Captures seasonal distribution with a continuous periodic functions.

✅ Handles non-integer seasonality (days in year, weeks in month).

✅ Flexibility of seasonal pattern controllable by number of harmonics.

❌ More complicated to interpret.
]

.pull-right[

]

---

.hand-large[thank you!]

- Email [rostami-tabarb@cardiff.ac.uk](mailto:rostami-tabarb@cardiff.ac.uk)

- Website [www.bahmanrt.com](www.bahmanrt.com)

- Twitter [@Bahman_R_T](https://twitter.com/Bahman_R_T)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
